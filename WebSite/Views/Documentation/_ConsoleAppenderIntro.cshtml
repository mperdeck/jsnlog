@using ViewExtensions

@{
    bool showWebConfigCode =
        ((string)(ViewData["configSource"]) == "web.config");
}

<p>
    JSNLog is based on the idea of integrating client side and server side logging - using the
    @if (showWebConfigCode)
    {
        @Html.ViewLink("webconfig-ajaxappender")
    }
    else
    {
        @Html.ViewLink("jsnlogjs-ajaxappender")
    }
    to send log items to the server.
</p>
<p>
    However, during development it can be useful to simply send log items to the
    console provided by the F12 developer tools in
    <a href="https://developers.google.com/chrome-developer-tools/docs/console" target="_blank">Chrome</a>,
    <a href="http://getfirebug.com/" target="_blank">Firefox</a>
    and
    <a href="" target="_blank">Internet Explorer</a>.
</p>
<p>
    That way, the log items appear immediately below your main browser window, so you don't have to check the server side log.
</p>
<h3>Sending log items from a logger to the console</h3>
<p>
    To see the log items that are generated by a logger in the console, you first create a ConsoleAppender and then use the
    @if (showWebConfigCode)
    {
        @Html.ViewLink("webconfig-logger")
    }
    else
    {
        @Html.ViewLink("jsnlogjs-logger-setOptions")
    }
    of the logger to
    send all log items to that ConsoleAppender:
</p>

@if (showWebConfigCode)
{
<pre>&lt;!-- "mylogger" logs to just the console --&gt;
&lt;consoleAppender name="consoleAppender" /&gt;
&lt;logger name="mylogger" appenders="consoleAppender" /&gt;</pre>
}
else
{
<pre>// "mylogger" logs to just the console
var consoleAppender=JL.createConsoleAppender('consoleAppender');
JL("mylogger").setOptions({"appenders": [consoleAppender]});
</pre>
}
<p>
    However, this means that all log items will only go to the console, and no longer to the server.
    If you want the log items to go to both the console and the server,
    send them to an AjaxAppender as well as to a ConsoleAppender:
</p>

@if (showWebConfigCode)
{
<pre>&lt;!-- "mylogger" logs to both the server and the console --&gt;
&lt;consoleAppender name="consoleAppender" /&gt;
&lt;ajaxAppender name="ajaxAppender" /&gt;
&lt;logger name="mylogger" appenders="ajaxAppender;consoleAppender" /&gt;</pre>
}
else
{
<pre>// "mylogger" logs to both the server and the console
var ajaxAppender=JL.createAjaxAppender('ajaxAppender');
var consoleAppender=JL.createConsoleAppender('consoleAppender');
JL("mylogger").setOptions({"appenders": [ajaxAppender,consoleAppender]});
</pre>
}

<h3>Sending log items from every logger to both the console and the server</h3>
<p>
    It may be easiest to get all loggers to log to both the console and the server.
    You can achieve this by using the
    @if (showWebConfigCode)
    {
        @Html.ViewLink("webconfig-logger")
    }
    else
    {
        @Html.ViewLink("jsnlogjs-logger-setOptions")
    }
    of the root logger. Through
    @if (showWebConfigCode)
    {
        @Html.ViewLink("webconfig-logger", "inheritance", fragment: "inheritance")<text>,</text>
    }
    else
    {
        @Html.ViewLink("jsnlogjs-logger-setOptions", "inheritance", fragment: "inheritance")<text>,</text>
    }
    every other logger will start logging to both the console and the server as well.
</p>

@if (showWebConfigCode)
{
<pre>&lt;!-- Debugging: all loggers log to both the server and the console --&gt;
&lt;consoleAppender name="consoleAppender" /&gt;
&lt;ajaxAppender name="ajaxAppender" /&gt;
&lt;logger appenders="ajaxAppender;consoleAppender" /&gt;</pre>
}
else
{
<pre>// Debugging: all loggers log to both the server and the console
var ajaxAppender=JL.createAjaxAppender('ajaxAppender');
var consoleAppender=JL.createConsoleAppender('consoleAppender');
JL().setOptions({"appenders": [ajaxAppender,consoleAppender]});
</pre>
}

<h3>Switching off logging to the console</h3>
<p>
    Once in production, you may want to stop logging to the console.
    You can achieve this by removing the ConsoleAppender:
</p>

@if (showWebConfigCode)
{
<pre>&lt;!-- Production: loggers log to the server only --&gt;
&lt;ajaxAppender name="ajaxAppender" /&gt;
&lt;logger appenders="ajaxAppender" /&gt;</pre>
}
else
{
<pre>// Production: loggers log to the server only
var ajaxAppender=JL.createAjaxAppender('ajaxAppender');
JL().setOptions({"appenders": [ajaxAppender]});
</pre>
}
<p>
    This means you don't have to go through your code to remove logging code - a simple change in
    @if (showWebConfigCode)
    {
        <text>the web.config</text>
    }
    else
    {
        <text>one place</text>
    }
    is enough. Keep in mind that if you associate individual loggers with the ConsoleAppender,
    you will have to remove that as well in order to stop all logging to the console.
</p>


